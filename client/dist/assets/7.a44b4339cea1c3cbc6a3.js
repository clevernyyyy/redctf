webpackJsonp([7],{"./src/pages/Register.js":function(e,t,a){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),a.d(t,"default",function(){return h});var o,i,c=a("./node_modules/react/react.js"),l=a.n(c),u=a("./node_modules/mobx-react/index.module.js"),d=(a("./node_modules/react-router-dom/es/index.js"),a("./node_modules/axios/index.js")),m=a.n(d),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),h=(o=Object(u.inject)("store"))(i=Object(u.observer)(i=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleTeamNameChaned=function(e){a.setState({team:e.currentTarget.value,isRegistrationError:!1})},a.handlePasswordChaned=function(e){a.setState({password:e.currentTarget.value,isRegistrationError:!1})},a.handleEmailChaned=function(e){a.setState({email:e.currentTarget.value,isRegistrationError:!1})},a.state={team:"",password:"",email:"",isRegistrationError:!1,errorMessage:"Error",isRegistrationSuccess:!1,successMessage:"Success"},a}return n(t,e),p(t,[{key:"onSubmit",value:function(e){var t=this;m.a.defaults.baseURL=location.protocol+"//"+location.hostname+":8000";var a=this.registerUser();m.a.post("/graphql/",{query:a,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){var a=e.data;null!==a.data.createUser?t.setState({isRegistrationSuccess:!0,successMessage:a.data.createUser.status},function(){setTimeout(function(){t.props.history.push("/login")},200)}):t.setState({isRegistrationError:!0,errorMessage:a.errors[0].message})})}},{key:"registerUser",value:function(){return'mutation { createUser ( username: "'+this.state.team+'", email: "'+this.state.email+'", password: "'+this.state.password+'") { status } }'}},{key:"render",value:function(){return l.a.createElement("div",{className:"page login"},l.a.createElement("main",null,l.a.createElement("div",{className:"login-window"},l.a.createElement("div",{className:"login-inputs"},l.a.createElement("input",{type:"text",placeholder:"team name",onChange:this.handleTeamNameChaned})),l.a.createElement("div",{className:"login-inputs"},l.a.createElement("input",{type:"password",placeholder:"password",onChange:this.handlePasswordChaned})),l.a.createElement("div",{className:"login-inputs"},l.a.createElement("input",{type:"text",placeholder:"email address",onChange:this.handleEmailChaned})),this.state.isRegistrationError&&l.a.createElement("div",{className:"error-message"},this.state.errorMessage),this.state.isRegistrationSuccess&&l.a.createElement("div",{className:"success-message"},this.state.successMessage),l.a.createElement("div",{className:"login-button-row"},l.a.createElement("button",{type:"button",className:"login-button",onClick:this.onSubmit.bind(this)},"Register")))))}}]),t}(c.Component))||i)||i}});